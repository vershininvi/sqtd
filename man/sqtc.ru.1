.TH sqtc "1" "09.09.2013" "sqtc" "Пользовательские команды"
.SH ИМЯ
sqtc \- Squid guotas traffic client 
.SH СИНТАКСИС
sqtc [-i] [-h] [-l] [-s файл] [-d файл]
.SH ОПИСАНИЕ
.B sqtc
используется совместно с sqtd для создания внешних списков доступа squid. Для запуска  необходимо указать расположение  файла сокета (опция -s командной строки, по умолчанию /var/lib/sqtd/sqtd.sock. При отладке конфигурации sqtd  может работать в интерактивном режиме (опция -i). 

.SH Интерактивный режим
.TP
\fB help\fR 
Выводит список команд интерактивного режима. 
.TP
\fB config\fR
получает от демона sqtd информацию о текущей конфигурации. 
.TP
\fB limits [USERNAME]\fR
выводит в консоль информацию об установленных лимитах, если имя пользователя не указано - выводится информация обо всех пользователях. 
.TP
\fB traf [USERNAME]\fR
выводит в консоль информацию о трафике, если имя пользователя не указано - выводится информация обо всех пользователях. 

.TP
\fB user USERNAME\fR
отображает OK если доступ в интернет пользователю разрешён и ERR, если доступ закрыт.


.SH Неинтерактивный режим
В неинтерактивном режиме программа принимает на стандартный ввод имя пользователя (url encoded) и выводит на стандартный вывод OK или ERR. В неинтерактивном режиме программа быть использована для построения внешних списков доступа squid. 

Для этого в файле конфигурации squid необходимо указать следующее:



external_acl_type  SQTD_ACL_TYPE ttl=30 negative_ttl=30 %LOGIN /usr/sbin/sqtc -l -d /tmp/sqtc.log

acl SQTD_ACL external SQTD_ACL_TYPE

http_access allow SQTD_ACL   


При ошибке доступа к файлу сокета  программа выдаёт ERR, если не указана опция командной строки -l или OK если опция указана.

.SH ОПЦИИ
.TP
\fB\-s  файл\fR  
файл сокета
.TP
\fB\-d  файл\fR  
файл лога
.TP
\fB\-h\fR
вывод краткой  справки
.TP
\fB\-i\fR
запуск в интерактивном режиме

.SH ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ
.TP
0 \- нормальное завершение работы
.TP
1 \- ошибка

.SH ФАЙЛЫ
.I /var/lib/sqtd/sqtd.sock  
.RS
файл сокета. Создаётся  демоном sqtd. 
.RE

.SH АВТОРЫ
Программа разработана  Вершининым Владимиром
 
<vershininvi@rambler.ru> Россия. Волгоград.

.SH "СМОТРИТЕ ТАКЖЕ"
man getent, man smb.conf, man squid, man sqtd.
